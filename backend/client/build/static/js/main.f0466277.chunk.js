(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{27:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(14),l=c.n(n),r=c(16),i=c(2),o=c(0);var j=function(){return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"HOME"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{src:"http://localhost:5000/images/image.jpg",alt:"image"}),Object(o.jsxs)("div",{children:["Photo by ",Object(o.jsx)("a",{href:"AUTHOR_LINK",children:"Brenda Godinez"})," on ",Object(o.jsx)("a",{href:"UNSPLASH_LINK",children:"Unsplash"})]})]}),Object(o.jsx)("a",{href:"/places",children:Object(o.jsx)("button",{className:"btn-primary",children:"Places Page"})})]})};var m=function(e){const t=Object(i.f)(),[c,s]=Object(a.useState)([]);Object(a.useEffect)((()=>{(async()=>{const e=await fetch("".concat("http://localhost:5000/","/places")),t=await e.json();s(t)})()}),[]);let n=c.map((e=>Object(o.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},className:"col-sm-6",children:[Object(o.jsx)("h2",{children:Object(o.jsx)("a",{href:"#",onClick:()=>t.push("/places/".concat(e.placeId)),children:e.name})}),Object(o.jsx)("p",{className:"text-center",children:e.cuisines}),Object(o.jsx)("img",{style:{maxWidth:200},src:e.pic,alt:e.name}),Object(o.jsxs)("p",{className:"text-center",children:["Located in ",e.city,", ",e.state]})]},e.placeId)));return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"Places to Rant or Rave About"}),Object(o.jsx)("div",{className:"row",children:n})]})};const d=Object(a.createContext)();var h=function(e){let{children:t}=e;const[c,s]=Object(a.useState)(null);return Object(a.useEffect)((()=>{(async()=>{let e=await fetch("".concat("http://localhost:5000/","//authentication/profile"),{Authorization:"Bearer ".concat(localStorage.getItem("token"))}),t=await e.json();s(t)})()}),[]),Object(o.jsx)(d.Provider,{value:{currentUser:c,setCurrentUser:s},children:t})};var u=function(e){let{comment:t,onDelete:c}=e;const{currentUser:s}=Object(a.useContext)(d);return Object(o.jsxs)("div",{className:"border col-sm-4",children:[Object(o.jsx)("h2",{className:"rant",children:t.rant?"Rant! \ud83d\ude21":"Rave! \ud83d\ude3b"}),Object(o.jsx)("h4",{children:t.content}),Object(o.jsx)("h3",{children:Object(o.jsxs)("strong",{children:["- ",t.author.firstName," ",t.author.lastName]})}),Object(o.jsxs)("h4",{children:["Rating: ",t.stars]}),"admin"===(null===s||void 0===s?void 0:s.role)?Object(o.jsx)("button",{className:"btn btn-danger",onClick:c,children:"Delete Comment"}):""]})};var b=function(e){let{place:t,onSubmit:c}=e;const[s,n]=Object(a.useState)([]),[l,r]=Object(a.useState)({content:"",stars:3,rant:!1,authorId:""});Object(a.useEffect)((()=>{(async()=>{var e;const t=await fetch("".concat("http://localhost:5000/","/users")),c=await t.json();r({...l,authorId:null===(e=c[0])||void 0===e?void 0:e.userId}),n(c)})()}),[]);let i=s.map((e=>Object(o.jsxs)("option",{value:e.userId,children:[e.firstName," ",e.lastName]},e.userId)));return Object(o.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),c(l),r({content:"",stars:3,rant:!1,authorId:null===(t=s[0])||void 0===t?void 0:t.userId})},children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"form-group col-sm-12",children:[Object(o.jsx)("label",{htmlFor:"content",children:"Content"}),Object(o.jsx)("textarea",{required:!0,value:l.content,onChange:e=>r({...l,content:e.target.value}),className:"form-control",id:"content",name:"content"})]})}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"form-group col-sm-4",children:[Object(o.jsx)("label",{htmlFor:"state",children:"Author"}),Object(o.jsx)("select",{className:"form-control",value:l.authorId,onChange:e=>r({...l,authorId:e.target.value}),children:i})]}),Object(o.jsxs)("div",{className:"form-group col-sm-4",children:[Object(o.jsx)("label",{htmlFor:"stars",children:"Star Rating"}),Object(o.jsx)("input",{value:l.stars,onChange:e=>r({...l,stars:e.target.value}),type:"range",step:"0.5",min:"1",max:"5",id:"stars",name:"stars",className:"form-control"})]}),Object(o.jsxs)("div",{className:"form-group col-sm-4",children:[Object(o.jsx)("label",{htmlFor:"rand",children:"Rant"}),Object(o.jsx)("input",{checked:t.rant,onClick:e=>r({...l,rant:e.target.checked}),type:"checkbox",id:"rant",name:"rant",className:"form-control"})]})]}),Object(o.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Add Comment"})]})};var O=function(){const{currentUser:e}=Object(a.useContext)(d),{placeId:t}=Object(i.g)(),c=Object(i.f)(),[s,n]=Object(a.useState)(null);if(Object(a.useEffect)((()=>{(async()=>{const e=await fetch("".concat("http://localhost:5000/","/places/").concat(t)),c=await e.json();n(c)})()}),[t]),null===s)return Object(o.jsx)("h1",{children:"Loading"});let l=null;"admin"===(null===e||void 0===e?void 0:e.role)&&(l=Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("a",{className:"btn btn-warning",onClick:function(){c.push("/places/".concat(s.placeId,"/edit"))},children:"Edit"}),Object(o.jsx)("button",{type:"submit",className:"btn btn-danger",onClick:async function(){await fetch("".concat("http://localhost:5000/","/places/").concat(s.placeId),{method:"DELETE",Authorization:"Bearer ".concat(localStorage.getItem("token"))}),c.push("/places")},children:"Delete"})]}));let r=Object(o.jsx)("h3",{className:"inactive",children:"No comments yet!"}),j=Object(o.jsx)("h3",{className:"inactive",children:"Not yet rated"});if(s.comments.length){let e=s.comments.reduce(((e,t)=>e+t.stars),0),t=Math.round(e/s.comments.length),c="";for(let a=0;a<t;a++)c+="\u2b50\ufe0f";j=Object(o.jsxs)("h3",{children:[c," stars"]}),r=s.comments.map((e=>Object(o.jsx)(u,{comment:e,onDelete:()=>async function(e){await fetch("".concat("http://localhost:5000/","/places/").concat(s.placeId,"/comments/").concat(e.commentId),{method:"DELETE",Authorization:"Bearer ".concat(localStorage.getItem("token"))}),n({...s,comments:s.comments.filter((t=>t.commentId!==e.commentId))})}(e)},e.commentId)))}return Object(o.jsxs)("main",{children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-sm-6",children:[Object(o.jsx)("img",{style:{maxWidth:200},src:s.pic,alt:s.name}),Object(o.jsxs)("h3",{children:["Located in ",s.city,", ",s.state]})]}),Object(o.jsxs)("div",{className:"col-sm-6",children:[Object(o.jsx)("h1",{children:s.name}),Object(o.jsx)("h2",{children:"Rating"}),j,Object(o.jsx)("br",{}),Object(o.jsx)("h2",{children:"Description"}),Object(o.jsxs)("h3",{children:[s.name," has been serving ",s.city,", ",s.state," since ",s.founded,"."]}),Object(o.jsxs)("h4",{children:["Serving ",s.cuisines,"."]}),Object(o.jsx)("br",{}),l]})]}),Object(o.jsx)("hr",{}),Object(o.jsx)("h2",{children:"Comments"}),Object(o.jsx)("div",{className:"row",children:r}),Object(o.jsx)("hr",{}),Object(o.jsx)("h2",{children:"Got Your Own Rant or Rave?"}),Object(o.jsx)(b,{place:s,onSubmit:async function(e){const t=await fetch("".concat("http://localhost:5000/","/places/").concat(s.placeId,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)}),c=await t.json();n({...s,comments:[...s.comments,c]})}})]})};var p=function(){const e=Object(i.f)(),{currentUser:t}=Object(a.useContext)(d);let c=Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("li",{style:{float:"right"},children:Object(o.jsx)("a",{href:"#",onClick:()=>e.push("/sign-up"),children:"Sign Up"})}),Object(o.jsx)("li",{style:{float:"right"},children:Object(o.jsx)("a",{href:"#",onClick:()=>e.push("/login"),children:"Login"})})]});t&&(c=Object(o.jsxs)("li",{style:{float:"right"},children:["Logged in as ",t.firstName," ",t.lastName]}));let s=null;return"admin"===(null===t||void 0===t?void 0:t.role)&&(s=Object(o.jsx)("li",{children:Object(o.jsx)("a",{href:"#",onClick:()=>e.push("/places/new"),children:"Add Place"})})),Object(o.jsx)("nav",{children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)("a",{href:"#",onClick:()=>e.push("/"),children:"Home"})}),Object(o.jsx)("li",{children:Object(o.jsx)("a",{href:"#",onClick:()=>e.push("/places"),children:"Places"})}),Object(o.jsx)("li",{children:s}),c]})})};var x=function(){return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"404: PAGE NOT FOUND"}),Object(o.jsx)("p",{children:"Oops, sorry, we can't find this page!"}),Object(o.jsx)("img",{src:"${process.env.REACT_APP_SERVER_URL}/images/kittykat.jpeg",alt:"cute cat pic"})]})};var f=function(){const e=Object(i.f)(),[t,c]=Object(a.useState)({name:"",pic:"",city:"",state:"",cuisines:""});return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"Add a New Place"}),Object(o.jsxs)("form",{onSubmit:async function(c){c.preventDefault(),await fetch("".concat("http://localhost:5000/","/places"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),e.push("/places")},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"name",children:"Place Name"}),Object(o.jsx)("input",{required:!0,value:t.name,onChange:e=>c({...t,name:e.target.value}),className:"form-control",id:"name",name:"name"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"founded",children:"Year Founded"}),Object(o.jsx)("input",{required:!0,value:t.founded,onChange:e=>c({...t,founded:e.target.value}),className:"form-control",id:"founded",name:"founded"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"pic",children:"Place Picture"}),Object(o.jsx)("input",{value:t.pic,onChange:e=>c({...t,pic:e.target.value}),className:"form-control",id:"pic",name:"pic"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"city",children:"City"}),Object(o.jsx)("input",{value:t.city,onChange:e=>c({...t,city:e.target.value}),className:"form-control",id:"city",name:"city"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"state",children:"State"}),Object(o.jsx)("input",{value:t.state,onChange:e=>c({...t,state:e.target.value}),className:"form-control",id:"state",name:"state"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"cuisines",children:"Cuisines"}),Object(o.jsx)("input",{value:t.cuisines,onChange:e=>c({...t,cuisines:e.target.value}),className:"form-control",id:"cuisines",name:"cuisines",required:!0})]}),Object(o.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Add Place"})]})]})};var g=function(){const e=Object(i.f)(),{placeId:t}=Object(i.g)(),[c,s]=Object(a.useState)({name:"",pic:"",city:"",state:"",cuisines:""});return Object(a.useEffect)((()=>{(async()=>{const e=await fetch("".concat("http://localhost:5000/","/places/").concat(t)),c=await e.json();s(c)})()}),[t]),Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"Edit Place"}),Object(o.jsxs)("form",{onSubmit:async function(t){t.preventDefault(),await fetch("".concat("http://localhost:5000/","/places/").concat(c.placeId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),e.push("/places/".concat(c.placeId))},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"name",children:"Place Name"}),Object(o.jsx)("input",{required:!0,value:c.name,onChange:e=>s({...c,name:e.target.value}),className:"form-control",id:"name",name:"name"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"founded",children:"Year Founded"}),Object(o.jsx)("input",{required:!0,value:c.founded,onChange:e=>s({...c,founded:e.target.value}),className:"form-control",id:"founded",name:"founded"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"pic",children:"Place Picture"}),Object(o.jsx)("input",{value:c.pic,onChange:e=>s({...c,pic:e.target.value}),className:"form-control",id:"pic",name:"pic"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"city",children:"City"}),Object(o.jsx)("input",{value:c.city,onChange:e=>s({...c,city:e.target.value}),className:"form-control",id:"city",name:"city"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"state",children:"State"}),Object(o.jsx)("input",{value:c.state,onChange:e=>s({...c,state:e.target.value}),className:"form-control",id:"state",name:"state"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"cuisines",children:"Cuisines"}),Object(o.jsx)("input",{value:c.cuisines,onChange:e=>s({...c,cuisines:e.target.value}),className:"form-control",id:"cuisines",name:"cuisines",required:!0})]}),Object(o.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Save"})]})]})};var v=function(){const e=Object(i.f)(),[t,c]=Object(a.useState)({firstName:"",lastName:"",email:"",password:""});return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"Sign Up"}),Object(o.jsxs)("form",{onSubmit:async function(c){c.preventDefault(),await fetch("".concat("http://localhost:5000/","/users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),e.push("/")},children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(o.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(o.jsx)("input",{required:!0,value:t.firstName,onChange:e=>c({...t,firstName:e.target.value}),className:"form-control",id:"firstName",name:"firstName"})]}),Object(o.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(o.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(o.jsx)("input",{required:!0,value:t.lastName,onChange:e=>c({...t,lastName:e.target.value}),className:"form-control",id:"lastName",name:"lastName"})]})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email"}),Object(o.jsx)("input",{type:"email",required:!0,value:t.email,onChange:e=>c({...t,email:e.target.value}),className:"form-control",id:"email",name:"email"})]}),Object(o.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(o.jsx)("label",{htmlFor:"password",children:"Password"}),Object(o.jsx)("input",{type:"password",required:!0,value:t.password,onChange:e=>c({...t,password:e.target.value}),className:"form-control",id:"password",name:"password"})]})]}),Object(o.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Sign Up"})]})]})};var N=function(){const e=Object(i.f)(),{setCurrentUser:t}=Object(a.useContext)(d),[c,s]=Object(a.useState)({email:"",password:""}),[n,l]=Object(a.useState)(null);return Object(o.jsxs)("main",{children:[Object(o.jsx)("h1",{children:"Login"}),null!==n?Object(o.jsx)("div",{className:"alert alert-danger",role:"alert",children:n}):null,Object(o.jsxs)("form",{onSubmit:async function(a){const s=await fetch("".concat("http://localhost:5000/","/authentication/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),n=await s.json();200===s.status?(t(n.user),console.log(n.user),localStorage.setItem("token",n.token),e.push("/")):l(n.message)},children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email"}),Object(o.jsx)("input",{type:"email",required:!0,value:c.email,onChange:e=>s({...c,email:e.target.value}),className:"form-control",id:"email",name:"email"})]}),Object(o.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(o.jsx)("label",{htmlFor:"password",children:"Password"}),Object(o.jsx)("input",{type:"password",required:!0,value:c.password,onChange:e=>s({...c,password:e.target.value}),className:"form-control",id:"password",name:"password"})]})]}),Object(o.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Login"})]})]})};var y=function(){return Object(o.jsx)(h,{children:Object(o.jsxs)(r.a,{children:[Object(o.jsx)(p,{}),Object(o.jsxs)(i.c,{children:[Object(o.jsx)(i.a,{exact:!0,path:"/",component:j}),Object(o.jsx)(i.a,{exact:!0,path:"/sign-up",component:v}),Object(o.jsx)(i.a,{exact:!0,path:"/login",component:N}),Object(o.jsx)(i.a,{exact:!0,path:"/places",component:m}),Object(o.jsx)(i.a,{exact:!0,path:"/places/new",component:f}),Object(o.jsx)(i.a,{exact:!0,path:"/places/:placeId",component:O}),Object(o.jsx)(i.a,{exact:!0,path:"/places/:placeId/edit",component:g}),Object(o.jsx)(i.a,{path:"/",component:x})]})]})})};l.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(y,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.f0466277.chunk.js.map